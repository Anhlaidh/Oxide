<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Java笔记03 | Oxide</title>
<meta name="keywords" content="Java" />
<meta name="description" content="Java">
<meta name="author" content="Anhlaidh">
<link rel="canonical" href="http://blog.oxide.ink/posts/java/java%E7%AC%94%E8%AE%B003/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.a7912db0dae3e62d0906024f5a11712a8f2023b34fe824cbb253e4731ec0117f.css" integrity="sha256-p5EtsNrj5i0JBgJPWhFxKo8gI7NP6CTLslPkcx7AEX8=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://blog.oxide.ink/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://blog.oxide.ink/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://blog.oxide.ink/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://blog.oxide.ink/apple-touch-icon.png">
<link rel="mask-icon" href="http://blog.oxide.ink/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.83.1" />
<link rel="alternate" hreflang="zh" href="http://blog.oxide.ink/posts/java/java%E7%AC%94%E8%AE%B003/" />

<script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
              delimiters: [
                  {left: "$$", right: "$$", display: true},
                  {left: "$", right: "$", display: false}
              ]
          });
    });
</script>



<script src="https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0-rc.1/katex.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0-rc.1/katex.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0-rc.1/contrib/auto-render.min.js"></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<script>
    window.onload = function (){
        console.log("aaa");
    }
    const height = 300;
    makeCollapsible();
    function makeCollapsible() {
        const divs = document.querySelectorAll('.highlight');
        divs.forEach((e) => {
            if (e.offsetHeight > height) {
                e.style.maxHeight = height + 'px';
                e.style.overflow = 'hidden';
                const linkWrapper = document.createElement('div');
                const link = document.createElement('a');
                link.href = '';
                link.textContent = 'more';
                link.addEventListener('click', codeToggle);
                linkWrapper.className = 'highlight-link';
                linkWrapper.appendChild(link);
                e.appendChild(linkWrapper);
            }
        });
    }
    function codeToggle(e) {
        e.preventDefault();
        const link = e.target;
        const linkWrapper = link.parentElement.parentElement;
        if (link.innerHTML === 'more') {
            link.innerHTML = 'less';
            linkWrapper.style.maxHeight = '';
            linkWrapper.style.overflow = 'none';
            link.parentElement.style.right = '0';
        } else {
            link.innerHTML = 'more';
            linkWrapper.style.maxHeight = height + 'px';
            linkWrapper.style.overflow = 'hidden';
            link.parentElement.style.right = '0.5em';
            scrollToTargetAdjusted(linkWrapper);
        }
    }
    function scrollToTargetAdjusted(e) {
        const header = document.querySelector('header');
        const headerHeight = window.getComputedStyle(header, null).getPropertyValue('height');
        const headerOffset = Number(headerHeight.replace('px', ''));
        const bodyRect = document.body.getBoundingClientRect().top;
        const elementRect = e.getBoundingClientRect().top;
        const elementPosition = elementRect - bodyRect;
        const offsetPosition = elementPosition - headerOffset;
        window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
        });
    }

</script><meta property="og:title" content="Java笔记03" />
<meta property="og:description" content="Java" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://blog.oxide.ink/posts/java/java%E7%AC%94%E8%AE%B003/" />
<meta property="og:image" content="http://blog.oxide.ink/%3Cimage%20path/url%3E" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-08T20:58:36&#43;08:00" />
<meta property="article:modified_time" content="2021-06-08T20:58:36&#43;08:00" /><meta property="og:site_name" content="Oxide" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://blog.oxide.ink/%3Cimage%20path/url%3E" />
<meta name="twitter:title" content="Java笔记03"/>
<meta name="twitter:description" content="Java"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://blog.oxide.ink/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Java笔记03",
      "item": "http://blog.oxide.ink/posts/java/java%E7%AC%94%E8%AE%B003/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Java笔记03",
  "name": "Java笔记03",
  "description": "Java",
  "keywords": [
    "Java"
  ],
  "articleBody": "语法糖 Syntactic sugar jdk版本  编译级别 兼容级别  编译后高版本可以运行低版本字节码 反之不行    for/for-each  for  for(int i=0;i 可以删除元素   for-each  for(String i:hs) 5.0开始存在 语法简洁 不能删除元素 只能正向遍历 不能同时遍历两个集合    enum类型  java5 推出 enum有多少个值就有几个实例对象 可以添加属性/构造函数/方法 构造函数只能是package-private(default)或者private,内部调用 enum类型  所有enum类型都是Enum的子类,也继承了相应方法 ordinal()返回枚举所在的索引位置,从0开始 compareTo()比较两个枚举值的索引位置大小 toString()返回枚举值的字符串标识 valueOf()将字符串初始化为枚举对象 values() 返回所有的枚举值    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46  package notes.Java.Java_Final.suger; /** * @Description: * @author: Anhlaidh * @date: 2020-07-05 21:31 */ public class testEnum { public static void main(String[] args) { Fruit a1 = Fruit.APPLE; System.out.println(\"Price is\" + a1.price); System.out.println(\"====================\"); Day d1 = Day.MONDAY; Day d2 = Enum.valueOf(Day.class, \"MONDAY\"); System.out.println(d1 == d2); Day d3 = Enum.valueOf(Day.class, \"TUESDAY\"); System.out.println(d1.compareTo(d3)); //遍历  for (Day item : Day.values()) { //输出索引值  System.out.println(item.toString() + \",\" + item.ordinal()); } } enum Day { MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY } enum Fruit { APPLE(10), ORANGE(8); private int price; Fruit(int price) { this.price = price; } public int getPrice() { return price; } } }   不定项参数  JDK5提供了不定参数(可变参数)功能  类型后面加3个点,入int…/double…/String… 可变参数,本质上是一个数组 一个方法只能由一个不定项参数,且位于参数列表的最后 重载的优先级规则1:固定参数的方法,比可变参数优先级更高 重载的优先级规则2:调用语句,同时与两个带可变参数的方法匹配,则报错    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38  package notes.Java.Java_Final.suger; /** * @Description: 可变参数 * @author: Anhlaidh * @date: 2020-07-05 21:46 */ public class testVariableArgument { public static void main(String[] args) { print(); print(\"aaa\"); print(\"aaa\",\"bbb\"); print(\"aaa\",\"bbb\",\"ccc\"); } private static void print(String... args) { System.out.println(args.length); for (String arg : args) { System.out.println(arg); } } //当只有一个参数时,本方法优先级更高  private static void print(String s) { System.out.println(\"优先级高的方法\"); } //错误:一个方法不可以有多个可变参数 // public static void print(String... args, int... irgs) { // // }  //调用语句,同时与两个带可变参数的方法匹配,则报错 // private static void print(String s1, String... args) { // // } }   静态导入  import static 导入类中的静态方法  使用时可以直接写方法名,不写类名   少用* 如果重名需要补充类名  自动装箱和拆箱  JDK5开始引入,简化基本类型和对象转化的写法 Integer–int… 编译器的工作,不是jvm的工作 ==:基本类型是内容相同,对象是指针是否相同 基本类型没有空值,对象有null 基础数据类型与封装类型进行 ==,+,-,*,/操作运算,会将封装类进行拆箱,对基础数据类型进行运算 谨慎使用多个非同类的数值类进行运算  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  package notes.Java.Java_Final.suger; /** * @Description: * @author: Anhlaidh * @date: 2020-07-07 15:31 */ public class testNumber { public static void main(String[] args) { Integer a1 = 1000; int a2 = 1000; Integer a3 = 2000; Long a4 = 2000L; long a5 = 2000L; System.out.println(a1 == a2);//拆箱再进行数值比较  System.out.println(a3 == (a1 + a2));//拆箱再进行数值比较  System.out.println(a4 == (a1 + a2));//拆箱再进行数值比较  System.out.println(a5 == (a1 + a2));//拆箱再进行数值比较  System.out.println(a3.equals(a1 + a2));//equals要求同类且内容相同  System.out.println(a4.equals(a1 + a2));//equals要求同类且内容相同  System.out.println(a4.equals((long)(a1 + a2)));//equals要求同类,且值相同 // System.out.println(a3 == a4);//不同类型不能比较  } }   多异常并列  多个异常用 | 隔开 多个异常之间不能有直接/简介继承关系  数字增强  数字可以二进制赋值  避免二进制计算 byte/short/int/long   数值字面量中可以使用下划线  增加数字的可读性和纠错功能 short/int/long/float/double 下划线只能出现在数字中间    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  package notes.Java.Java_Final.suger; /** * @Description: * @author: Anhlaidh * @date: 2020-07-07 15:40 */ public class testNumber2 { public static void main(String[] args) { test1(); test2(); } private static void test2() { long a1 = 9999999999L; long a2 = 9_999_999_999L; int a3 = 0b0111_1011_0001;//二进制0b开头  int a4 = 02_014;//8进制,0开头  int a5 = 123__45;//可以多个下划线  int a6 = 0x7_B_1;//十六进制  float a7 = 3.56_78f;//float  double a8 = 1.3_45_67;//double  // int b1 = 0b_123_4; _必须在数字之间 // int b2 = 0123_4_;不能在末尾 // int b3 = _123;不能在开头 // int b4 = 0_ x_123;不能拆开0x // int b5 = 0x_51;_必须在数字之间 // long b6 = 1000_L;_必须在数字之间 // float b7 = 1.34f _;_不能在末尾  } private static void test1() { byte a1 = (byte) 0b00100001; short a2 = (short) 0b001010100; int a3 = 0b0010101010; int a4 = 0b101; int a5 = 0B101;//B可以大小写  long a6 = 0b1010101010010010010101010L; final int[] s1 = {0b101010, 0b101101, 0b1101111, 0b1111}; System.out.println(a5); System.out.println(Integer.toBinaryString(a5)); } }   接口方法   java8 接口默认方法/静态方法(都带具体实现)\n  默认方法\n 规则  以default关键字标注,其他定义和普通函数一样 规则1:默认方法 不能重写 Object中的方法 规则2:实现类可以继承/重写父接口默认方法 规则3:接口可以继承/重写父接口的默认方法 规则4:当父类和父接口都有(同名同参数) 默认方法,子类继承父类的默认方法,这样可以兼容JDK7及以前的代码 规则5:子类实现了两个接口(均有同名同参数的默认方法),那么编译失败,必须在子类中重写这个default方法      静态方法\n 属于本接口,不属于子类/子接口 子类(子接口)没有继承该静态方法,只能通过所在的接口名来调用 -java9 私有方法 解决多个默认方法/静态方法的内容重复问题 私有方法属于本接口,只在本接口内使用,不属于子类/子接口 子类(子接口)没有继承该私有方法,也无法调用 静态私有方法可以被静态/默认方法调用,非静态私有方法被默认方法调用    接口,抽象类\n 相同点  都是抽象的,都不能被实例化,即不能被new 都可以有实现方法 都可以不需要继承者实现所有方法   不同点(java12之前)  抽象类最多只能继承一个,接口可以实现多个 接口的变量默认是public static final,且必须有初值,子类不能修改,而抽象类的变量默认是default,子类可以继承修改 接口没有构造函数,抽象类有构造函数 接口没有main函数,抽象类可以有main函数 接口有public/default/private的方法,抽象类只有public/private/protected/不写关键字的(default)的方法      try-with-resource  jdk7提供try-with-resource  资源要求定义在try中,若已经定义在外面,则需要一个本地变量   jdk9不在要求定义临时变量,可以直接使用外部资源变量 原理  资源对象必须实现AutoCloseable接口,即close方法,jdk自带    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  package notes.Java.Java_Final.suger.testTryWithResource; /** * @Description: * @author: Anhlaidh * @date: 2020-07-07 16:58 */ public class test { public static void main(String[] args) { try (MyConnection connection = new MyConnection()) { connection.sendData(); } catch (Exception e) { e.printStackTrace(); } } } class MyConnection implements AutoCloseable { public void sendData() throws Exception { System.out.println(\"Send Data...\"); } @Override public void close() throws Exception { System.out.println(\"Close...\"); } }   ResourceBundle文件加载  JDK9及以后,ResourceBundle默认以UTF-8方式加载  var类型  java10推出var  避免信息冗余 对齐了变量名 更容易阅读 本质上还是强类型语言,编译器负责推断类型,并写入字节码文件,因此推断后不能更改   var的限制  可以用在局部变量中,非类成员变量 可以在for/for-each中 声明时必须初始化 不能用在方法(形式)参数和返回类型 大面积滥用会使代码整体阅读性变差 var 只在编译时起作用,没有在字节码中引入新的内容,也没有专门的jvm指令处理var    switch  支持的类型:byte/Byte,short/Short,int/Integer,char/Character,String(7.0),Enum(5.0) 仍不支持long/float/double 多分支合并  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43  package notes.Java.Java_Final.suger; import java.util.Scanner; /** * @Description: * @author: Anhlaidh * @date: 2020-07-07 17:16 */ public class testSwitch { public static void main(String[] args) { // test1();  test2(); } private static void test2() { Scanner scanner = new Scanner(System.in); int num= scanner.nextInt(); int days = switch (num){ case 1,3,5,7,8,10,12 - 31; case 4,6,9,11 - 30; default - 28; }; System.out.println(days); } private static void test1() { Scanner scanner = new Scanner(System.in); String month = scanner.next(); int result=-1; switch (month) { case \"Jan\",\"Mar\",\"May\",\"July\",\"Aug\",\"Oct\",\"Dec\" - result = 31; case \"Apr\",\"June\",\"Sep\",\"Nov\" - result = 30; case \"Feb\" - result = 28; default - result = -1; } System.out.println(result); } }   反射 reflection  定义  程序可以访问,检测和修改它本身状态或行为的能力,即自描述和自控制 可以在运行时加载,探知,和使用编译期间完全未知的类 给java插上动态语言特性的翅膀,弥补强类型语言的不足 java.lan.reflect包,在java2存在,java5完善   功能  在运行中分析类的能力 在运行中查看和操作对象  基于反射自由创建对象 反射构建出无法直接访问的类 set或者get到无法访问的成员变量 调用不可访问的方法   实现通用的数组操作代码 类似函数指针的功能   创建对象  静态编码\u0026编译(new) 克隆(clone()),继承Cloneable,速度快 序列化serialization,反序列化deserialization继承Serializable接口    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  package notes.Java.Java_Final.Reflect; import java.io.*; /** * @Description: * @author: Anhlaidh * @date: 2020-07-07 18:05 */ public class testSerialization { public static void main(String[] args) throws IOException, ClassNotFoundException { A obj1 = new A(); ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(\"data.obj\")); out.writeObject(obj1); out.close(); ObjectInputStream in = new ObjectInputStream(new FileInputStream(\"data.obj\")); A obj2 = (A) in.readObject(); in.close(); obj2.hello(); } } class A implements Serializable { private static final long serialVersionUID = 1L; public void hello() { System.out.println(\"hello from A\"); } } ```     反射 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  package notes.Java.Java_Final.Reflect; import java.lang.reflect.Constructor; import java.lang.reflect.InvocationTargetException; import java.lang.reflect.Method; /** * @Description: * @author: Anhlaidh * @date: 2020-07-07 19:32 */ public class testNewInstance { public static void main(String[] args) throws ClassNotFoundException, InvocationTargetException, IllegalAccessException, InstantiationException, NoSuchMethodException { Object obj1 = Class.forName(\"notes.Java.Java_Final.Reflect.A\").newInstance(); Method m = Class.forName(\"notes.Java.Java_Final.Reflect.A\").getMethod(\"hello\"); m.invoke(obj1);//获取方法  A obj2 = (A) Class.forName(\"notes.Java.Java_Final.Reflect.A\").newInstance(); ConstructorA constructor = A.class.getConstructor();//构造函数  A obj3 = constructor.newInstance(); obj3.hello(); } }      内容  Class:类型标识   JVM为每个对象都保留其类型标识信息(Runtime Type Identification) 成员变量,方法,构造函数,修饰符,包,父类,父接口… 成员变量Field 方法Method 构造函数Constructor    编译器API  对 .java文件即时编译 对字符串即时编译 监听在编译过程中产生的警告和错误 在代码中运行编译器(并非:Runtime命令调用javac命令)  JavaCompiler   1.6推出\n  可用在程序文件中的Java编译器接口(代替javac.exe)\n  在程序中编译java文件,产生class文件\n  run方法(继承自java.tools.Tools):较简单,可以编译java源文件,生成class文件,但不能指定输出 路径,监控错误信息,调用后就在源码所在目录生成class文件\n  getTask方法:更强大的功能,可以编译java源文件,包括在内存中的java文件(字符串),生成class文件\n  编译文件:\n  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  package notes.Java.Java_Final.JavaCompiler; import javax.tools.JavaCompiler; import javax.tools.ToolProvider; import java.io.ByteArrayOutputStream; import java.nio.charset.Charset; /** * @Description: * @author: Anhlaidh * @date: 2020-08-04 14:30 */ public class SimpleJavaCompiler { public static void main(String[] args) { // successCompile();  failCompile(); } private static void failCompile() { ByteArrayOutputStream err = new ByteArrayOutputStream(); JavaCompiler compiler = ToolProvider.getSystemJavaCompiler(); int result = compiler.run(null, null, err, \"./aaa.java\"); if (0 == result) { System.out.println(\"Success\"); } else { System.out.println(\"Fail\"); System.out.println(new String(err.toByteArray(), Charset.defaultCharset()) ); } } private static void successCompile() { JavaCompiler compiler = ToolProvider.getSystemJavaCompiler(); /** * 第一个参数:输入流,null表示默认使用system.in * 第二个参数:输出流,null标识默认使用system.out * 第三个参数:错误流,null标识默认使用system.err * 第四个参数:String...需要编译的文件名 * 返回值:0表示成功,其他错误 */ int result = compiler.run(null, null, null, \"G:\\\\Coding\\\\src\\\\main\\\\java\\\\notes.Java\\\\Java_Final\\\\API\\\\hello1.java\",\"G:\\\\Coding\\\\src\\\\main\\\\java\\\\notes.Java\\\\Java_Final\\\\API\\\\hello2.java\"); System.out.println(0 == result ? \"Success\" : \"Fail\"); } }    编译字符串  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95  package notes.Java.Java_Final.JavaCompiler; import javax.tools.*; import java.io.File; import java.lang.reflect.Method; import java.net.URISyntaxException; import java.net.URL; import java.nio.charset.Charset; import java.util.Arrays; /** * @Description: * @author: Anhlaidh * @date: 2020-08-04 14:46 */ public class JavaCompilerTask { public static void main(String[] args) { compilerJavaFromString(); // System.out.println(\"hello world\");  } private static void compilerJavaFromString() { StringBuffer stringBuffer = new StringBuffer(); String className = \"Hello\"; stringBuffer.append(\"public class \" + className + \"{\"); stringBuffer.append(\" public static void main(String[] args) {\"); stringBuffer.append(\" System.out.println(\\\"hello world\\\");\\n\"); stringBuffer.append(\"}\\n\"); stringBuffer.append(\"}\\n\"); Class c = compiler(className, stringBuffer.toString()); try { //生成对象  Object obj = c.newInstance(); Method m = c.getMethod(\"main\", String[].class); m.invoke(obj, new Object[]{new String[]{}}); } catch (Exception e) { e.printStackTrace(); } } private static Class compiler(String className, String javaCode) { JavaSourceFromString srcObject = new JavaSourceFromString(className, javaCode); System.out.println(srcObject.getCode()); Iterable extends JavaFileObject fileObjects = Arrays.asList(srcObject); JavaCompiler compiler = ToolProvider.getSystemJavaCompiler(); StandardJavaFileManager fileManager = compiler.getStandardFileManager(null, null, Charset.defaultCharset()); DiagnosticCollectorJavaFileObject diagnosticCollector = new DiagnosticCollector(); //设置编译的输出目录,并包装在options中  String flag = \"-d\"; String outDir = \"\"; try { URL resource = Thread.currentThread().getContextClassLoader().getResource(\"\"); File classpath = new File(resource.toURI()); outDir = classpath.getAbsolutePath() + File.separator; System.out.println(outDir); } catch (URISyntaxException e) { e.printStackTrace(); } IterableString options = Arrays.asList(flag, outDir); /** * JavaCompiler.getTask方法:以future的任务形式(多线程)来执行编译任务 * 第一个参数:额外输出流,null表示默认使用System.err * 第二个参数:文件管理器,null表示编译器默认方法来报告诊断信息 * 第三个参数:诊断监听器,null表示使用编译器默认方法来报告诊断信息 * 第四个参数:编译器参数,null表示无参数 * 第五个参数:需要经过annotation处理的类名,null表示没有类需要annotation * 第六个参数,待编译的类 */ JavaCompiler.CompilationTask task = compiler.getTask(null, fileManager, diagnosticCollector, options, null, fileObjects); //等待编译结束  boolean result = task.call(); if (result == true) { try { return Class.forName(className); } catch (ClassNotFoundException e) { e.printStackTrace(); } } else { for (Diagnostic diagnostic : diagnosticCollector.getDiagnostics()) { System.out.println(\"Error on line:\" + diagnostic.getLineNumber() + \";URI\" + diagnostic.getSource().toString()); } } return null; } }    其中的JavaSourceFromString 类  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  package notes.Java.Java_Final.JavaCompiler; import javax.tools.SimpleJavaFileObject; import java.io.IOException; import java.net.URI; /** * @Description: A file object used to represent source coming from a string * @author: Anhlaidh * @date: 2020-08-04 14:57 */ public class JavaSourceFromString extends SimpleJavaFileObject { private String code; public JavaSourceFromString(String name, String code) { super(URI.create(\"string:///\" + name.replace('.', '/') + Kind.SOURCE.extension),Kind.SOURCE); this.code = code; } @Override public CharSequence getCharContent(boolean ignoreEncodingErrors) throws IOException { return code; } public String getCode() { return code; } }    notes.Java EE 的Jsp编译 在线编程观景 在线程序评判系统(OJ) 自动化的构建和测试工具  代理(Proxy):代替处理  代理模式  外界不用直接访问目标对象,而是访问代理对象,由代理对象再调用目标对象 代理对象中可以添加监控和审查处理 静态代理  代理对象持有目标对象的句柄 所有调用目标对象的方法,都调用代理对象的方法 对每个方法,需要静态编码(理解简单,但代码繁琐)   动态代理  对目标对象的方法每次被调用,进行动态拦截 方法重名会用第一个接口的方法     Main  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46  package notes.Java.Java_Final.Proxy.test; import java.lang.reflect.*; import java.util.Arrays; /** * @Description: * @author: Anhlaidh * @date: 2020-08-04 18:06 */ public class MultipleInterfacesProxyTest { public static void main(String[] args) throws NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException { Cook cook = new CookImpl(); ClassLoader cl = MultipleInterfacesProxyTest.class.getClassLoader(); ProxyHandler handler = new ProxyHandler(cook); //生成代理类型  Class proxyClass = Proxy.getProxyClass(cl, new Class[]{Cook.class, Driver.class}); //生成代理对象  Object proxy = proxyClass.getConstructor(new Class[]{InvocationHandler.class}).newInstance(new Object[]{handler}); System.out.println(Proxy.isProxyClass(proxyClass)); Proxy p = (Proxy) proxy; System.out.println(Proxy.getInvocationHandler(proxy).getClass().getName()); System.out.println(\"proxy类型\" + proxyClass.getName()); //代理对象都继承于java.lang.reflect.Proxy,但是获取父类是Object而不是Proxy  Class father = proxyClass.getSuperclass(); System.out.println(\"proxy的父类类型:\" + father.getName()); Class[] cs = proxy.getClass().getInterfaces(); for (Class c : cs) { System.out.println(\"proxy的父接口类型\" + c.getName()); } System.out.println(\"===============\"); Method[] ms = proxy.getClass().getMethods(); for (Method m : ms) { System.out.println(\"调用方法\" + m.getName() + \"参数为\" + Arrays.deepToString(m.getParameters())); } System.out.println(\"===============\"); Cook c = (Cook) proxy; c.doWork(); Driver d = (Driver) proxy; d.doWork(); } }    Handler  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  package notes.Java.Java_Final.Proxy.test; import java.lang.reflect.InvocationHandler; import java.lang.reflect.Method; import java.util.Arrays; /** * @Description: * @author: Anhlaidh * @date: 2020-08-04 18:03 */ public class ProxyHandler implements InvocationHandler { private Cook cook; public ProxyHandler(Cook cook) { this.cook = cook; } @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { System.out.println(\"proxy类型\" + proxy.getClass().getName()); System.out.println(\"调用方法\" + method + \";参数为\" + Arrays.deepToString(args)); Object result = method.invoke(cook, args); return result; } }   AOP(Aspect Oriented Programming)  面向对象: 将需求功能划分为不同的,独立,分装良好的类,并让他们通过继承和多态实现相同和不同行为 面向切面: 将通用需求功能从众多类中分离出来,使得很多类共享一个行为,一旦发生变化,不必修改很多类,而只修改这个行为即可  面向切面编程  一个概念/规范,没有限定语言 不是取代OOP编程,而是OOP的补充,和数据库的触发器有点相似 主要内容  Aspect:配置文件,包括一些Pointcut和响应的Advice JointPoint:在程序中明确定义的点,如方法调用,对类成员访问等 PointCut: 一组JointPoint,可以哦通过逻辑关系/通配符/正则等组合起来,定义了响应advice将要发生的地方 Advice:定义了在pointcut处要发生的动作,通过before/after/around来关联 weaving:advice代码在具体jointPoint的关联方式    注解Annotation  JDK1.5引入 位于源码中(代码/注释/注解),使用其他工具进行处理的标签 注解用来修饰程序的元素,但不会对修饰的对象有直接的影响 只有通过某种配套的工具才会对注解信息进行访问和处理 主要用途  提供信息给编译器/IDE工具 可用于其他工具来产生额外的代码/配置文件等 有一些注解可在程序运行时访问,增加程序动态性   @SuppressWarning  不同jdk 不同,javac -X可查看    自定义注解  注解可以包括的类型  8种基本类型 String Class enum 注解类型 由前面类型组成的数组    1 2 3 4 5 6 7 8 9 10 11 12 13 14  package notes.Java.Java_Final.Annotation; public @interface BugReport { enum Status {UNCONFIRMED,CONFIRMED,FIXED, NOTABUG}; boolean showStopper() default true; String assignedTo() default \"[notes]\"; Status status() default Status.UNCONFIRMED; String[] reportedBy(); }    注解使用的位置(@Target) @Retention(RetentionPolicy.RUNTIME) 编译时也存在 自定义注解及其使用  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  package notes.Java.Java_Final.Annotation.Single; import java.lang.reflect.Method; /** * @Description: * @author: Anhlaidh * @date: 2020-08-05 17:18 */ public class Main { public static void main(String[] args) throws ClassNotFoundException { int passed = 0, failed = 0; String className = \"notes.Java.Java_Final.Annotation.Single.Foo\"; for (Method m : Class.forName(className).getMethods()) { if (m.isAnnotationPresent(SingleTest.class)) { System.out.println(m.getName()); SingleTest st = m.getAnnotation(SingleTest.class); try { m.invoke(null, st.value()); passed++; } catch (Throwable throwable) { System.out.printf(\"Test %s failed %s %n\", m, throwable.getCause().getMessage()); failed++; } } } System.out.printf(\"Success: %d ,Failed: %d %n\", passed, failed); } }   元注解   修饰注解的注解\n  @Target 设置目标范围\n 限定目标注解作用于什么位置@Target({ElementType.METHOD}) ElementType.ANNOTATION_TYPE(注:修饰注解) ElementType.CONSTRUCTOR ElementType.FIELD ElementType.LOCAL_VARIABLE ElementType.METHOD ElementType.PACKAGE ElementType.PARAMETER ElementType.TYPE(注:任何类型,即上面的类型都可以修饰)    @Retention 设置保持性\n 修饰其他注解的存在范围 Retention.SOURCE 注解仅存在源码,不在class文件 Retention.CLASS(默认的注解保留策略) 注解存在于.class文件,不能被JVM加载 Retention.RUNTIME这种策略下,注解可以被JVM运行时访问到,通常情况下,可以结合反射来做一些事情    @Inherited 注解继承\n 让一个类和他的子类都包含某个注解 普通的注解没有继承功能    @Repeatable 此注解可以重复修饰\n 自jdk1.8引入 表示被修饰的注解可以重复应用标注 需要定义注解和容器注解    @Document 文档\n 指明这个注解可以被javadoc工具解析,形成帮助文档    RUNTIME注解调用路线\n Java为注解产生一个代理类 这个代理类包括一个AnnotationInvocationHandler成员变量 AnnotationInvocationHandler有个Map的成员变量,用来存储所有的注解的属性赋值 在程序中,调用注解接口的方法,将会被代理类接管,然后根据方法名字,到Map里拿到对应的Value并返回    嵌套类 Nested classes  静态嵌套类: Static nested classes,即前面有static修饰符  层级和包围类(enclosing class)的成员变量/方法一样 静态嵌套类可以定义静态和非静态成员 第三方需要通过外部包围类才可以访问到静态嵌套类  Outer.Inner obj = new Outer.Inner();     非静态嵌套类: Non-static nested classes ,又名内部类,Inner classes  普通内部类(成员内部类)  非static的类,定义在某个类的成员变量位置 定义后在类里面均可以使用 在第三方类中,需要先创建外部包围类实例,才能创建内部类的实例,不允许单独的普通内部类对象存在  Outer.Inner obj = Outer.new Inner();     局部内部类(Local classes)  定义在代码块中的非静态的类,如方法,for循环,if语句等 定义后,即可创建对象使用 只能活在这个代码块中,代码块结束后,外界无法使用该类   匿名内部类(Anonymous class)  没有类名的内部类,必须继承一个父类/实现一个父接口 在实例化以后,迅速转型为父类/父接口 这种类型的对象,只能new一个对象,之后以对象名字操作 可在普通语句和成员变量赋值时使用内部类     为什么需要嵌套类  不同的访问权限要求,更细粒度的访问控制 简介,避免过多的类定义 语言设计过于复杂,较难学习和使用      位置 名字(编译后的class文件) 作用范围 基本信息 嵌套类内部的内容 可访问的外部包围类的内容 和外部类的关系     匿名内部类 成员变量或者成员方法内 外部类名+$+数字编号 跟随被复制变量的作用范围,外界无法访问 没有类名,没有构造函数没有static,private/default/protected/public修饰 不能带静态成员 访问外部的所有成员 在外部类对象内部   局部内部类 成员方法内 外部类名+$+序号+内部类名 所在的方法内外界无法访问 有类名,有构造函数没有static,private/default/protected/public修饰 不能带静态成员,除了常量 访问外部的所有成员 在外部类的对象内部   普通内部类 成员变量 外部类名+$+内部类名 包围类内可以访问,外界可以访问 有类名,有构造函数没有static,private/default/protected/public修饰 不能带静态成员,除了常量 访问外部的所有成员 外界可以new,但是必须依附于一个外部包围类对象   静态嵌套类 成员变量 外部类名+$+内部类名 包围类内部可以访问,外界可以访问 有类名,有构造函数有static,private/default/protected/public修饰 可以定义静态成员变量和方法 访问外部的所有静态成员 可以new,可独立进行工作     变量遮蔽:Shadowing  嵌套类变量和外部包围类的变量重名  以离得近作为优先原则 优先级高的变量回遮蔽优先级低的变量 外部包围类.this.变量名,可以访问到外部包围类的成员变量 静态嵌套类不能访问非静态变量 Java7及以前,匿名内部类和局部内部类只能访问外部包围类的final成员变量 Java8及以后,匿名内部类和局部内部类可以访问外部包围类的final成员变量和 事实意义上的final变量(effectively final,一个变量定值后,再也没有改过值)      Lambda表达式  参数,箭头,一个表达式 参数,箭头,{多个语句} 类似于匿名方法,一个没有名字的方法 参数,箭头,表达式语句 可以忽略写参数类型 坚决不声明返回值类型 没有public/protected/private/static/final等修饰符 单句表达式,将直接返回值,不用大括号 带return语句,算多句,必须用大括号  函数式接口  是一个接口,符合Java接口的定义 只包含一个抽象方法的接口 可以包含其他的default方法,static方法,private方法 由于只有一个未实现的方法,所以Lambda表达式可以自动填上这个尚未实现的方法 采用Lambda表达式,可以自动创建出一个(伪)嵌套类的对象(没有实际嵌套类class文件产生),然后使用, 比真正嵌套类更加轻量,更加简洁高效  1 2 3 4 5 6 7  package notes.Java.Java_Final.Lambda; @FunctionalInterface //标记为函数式接口 public interface StringChecker { public boolean test(String s); }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  package notes.Java.Java_Final.Lambda; /** * @Description: * @author: Anhlaidh * @date: 2020-08-06 21:38 */ public class Main { public static void main(String[] args) { String[] s = new String[]{\"aaa\", \"bbbb\", \"cccccc\"}; StringChecker eventLength = s1 - { if (s1.length() % 2 == 0) { return true; } return false; }; for (String p : s) { if (eventLength.test(p)) { System.out.println(p); } } } }   系统自带的函数式接口    接口 参数 返回值 实例     Predicate T Boolean 接收一个参数,返回一个boolean   Consumer T void 接受一个参数,无返回   Function T R 接受一个参数,返回一个值   Supplier None T 数据工厂    方法引用  Class::staticMethod  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  package notes.Java.Java_Final.Lambda; /** * @Description: * @author: Anhlaidh * @date: 2020-08-06 22:26 */ public class method { public static void main(String[] args) { double a = -3.5; double b = worker(Math::abs, a); System.out.println(b); double c = worker(Math::floor, a); System.out.println(c); double d = worker((num - (num % 10)), a); System.out.println(d); } public static double worker(NumFunction nf, double num) { return nf.calculate(num); } }    Class::instanceMethod  第一个参数将变成方法的执行体 String::compareToIgnoreCase等价于(x,y)-x.compareToIgnoreCase(y)  1 2 3  String[] planets = new String[]{\"DDD\",\"aaa\", \"bbb\", \"ccc\"}; Arrays.sort(planets, String::compareToIgnoreCase); System.out.println(Arrays.toString(planets));      object::instanceMethod  支持this::instanceMethod 支持super::instanceMethod   Class::new,调用某类构造函数,支持单个对象构建 Class[]::new,调用某类构造函数,支持数组对象构建 应用  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  package notes.Java.Java_Final.Lambda; import java.util.ArrayList; import java.util.Arrays; /** * @Description: * @author: Anhlaidh * @date: 2020-08-07 15:06 */ public class testIterable { public static void main(String[] args) { String[] p = new String[]{\"aaa\", \"bbb\", \"ccc\"}; ArrayListString pList = new ArrayListString(Arrays.asList(p)); for (String s : pList) { System.out.println(s); } pList.forEach(System.out::println); } }   流 stream  sequence of elements:一个流对外提供一个接口,可以访问到一串特定的数据,流不存储元素,但是可以根据需要进行计算转化 source:数据来源,如数据结构,数组,文件等 aggregate operation:聚合操作,流支持像SQL操作或者其他函数式语言的操作 如filter/map/reduce/find/match/sorted等 Stream流  pipelining:很多流操作也是返回一个流 Internal Iteration:流操作进行迭代,用户感知不到循环遍历    流的工作流程  流的创建   Collection接口的stream方法 Arrays.stream(数组) Stream.of()     empty() 空流      流的转换,将流转换为其他流的中间操作,可包括多个步骤(惰性操作) 流的计算结果,这个操作会强制执行之前的惰性操作,这个步骤以后,流就再也不用了  ",
  "wordCount" : "2742",
  "inLanguage": "zh",
  "image":"http://blog.oxide.ink/%3Cimage%20path/url%3E","datePublished": "2021-06-08T20:58:36+08:00",
  "dateModified": "2021-06-08T20:58:36+08:00",
  "author":{
    "@type": "Person",
    "name": "Anhlaidh"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://blog.oxide.ink/posts/java/java%E7%AC%94%E8%AE%B003/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Oxide",
    "logo": {
      "@type": "ImageObject",
      "url": "http://blog.oxide.ink/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://blog.oxide.ink/" accesskey="h" title="Oxide (Alt + H)">Oxide</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="http://blog.oxide.ink/en/" title="English"
                            aria-label="English">English</a>
                    </li>
                </ul>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://blog.oxide.ink/archives" title="文章归档">
                    <span>文章归档</span>
                </a>
            </li>
            <li>
                <a href="http://blog.oxide.ink/categories/" title="分类">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="http://blog.oxide.ink/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="http://blog.oxide.ink/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="http://blog.oxide.ink/links/" title="友情链接">
                    <span>友情链接</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://blog.oxide.ink/">Home</a>&nbsp;»&nbsp;<a href="http://blog.oxide.ink/posts/">Posts</a></div>
    <h1 class="post-title">
      Java笔记03
    </h1>
    <div class="post-description">
      Java
    </div>
    <div class="post-meta">June 8, 2021&nbsp;·&nbsp;13 分钟&nbsp;·&nbsp;Anhlaidh&nbsp;|&nbsp;<a href="https://github.com/Anhlaidh/Oxide/blob/master/content/cn/posts/Java/Java%e7%ac%94%e8%ae%b003/index.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>
</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">目录</div>
        </summary>
        <div class="inner"><ul>
                <li>
                    <a href="#%e8%af%ad%e6%b3%95%e7%b3%96-syntactic-sugar" aria-label="语法糖 Syntactic sugar">语法糖 Syntactic sugar</a><ul>
                        
                <li>
                    <a href="#jdk%e7%89%88%e6%9c%ac" aria-label="jdk版本">jdk版本</a></li>
                <li>
                    <a href="#forfor-each" aria-label="for/for-each">for/for-each</a></li>
                <li>
                    <a href="#enum%e7%b1%bb%e5%9e%8b" aria-label="enum类型">enum类型</a></li>
                <li>
                    <a href="#%e4%b8%8d%e5%ae%9a%e9%a1%b9%e5%8f%82%e6%95%b0" aria-label="不定项参数">不定项参数</a></li>
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e5%af%bc%e5%85%a5" aria-label="静态导入">静态导入</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%8a%a8%e8%a3%85%e7%ae%b1%e5%92%8c%e6%8b%86%e7%ae%b1" aria-label="自动装箱和拆箱">自动装箱和拆箱</a></li>
                <li>
                    <a href="#%e5%a4%9a%e5%bc%82%e5%b8%b8%e5%b9%b6%e5%88%97" aria-label="多异常并列">多异常并列</a></li>
                <li>
                    <a href="#%e6%95%b0%e5%ad%97%e5%a2%9e%e5%bc%ba" aria-label="数字增强">数字增强</a></li>
                <li>
                    <a href="#%e6%8e%a5%e5%8f%a3%e6%96%b9%e6%b3%95" aria-label="接口方法">接口方法</a></li>
                <li>
                    <a href="#try-with-resource" aria-label="try-with-resource">try-with-resource</a></li>
                <li>
                    <a href="#resourcebundle%e6%96%87%e4%bb%b6%e5%8a%a0%e8%bd%bd" aria-label="ResourceBundle文件加载">ResourceBundle文件加载</a></li>
                <li>
                    <a href="#var%e7%b1%bb%e5%9e%8b" aria-label="var类型">var类型</a></li>
                <li>
                    <a href="#switch" aria-label="switch">switch</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8f%8d%e5%b0%84-reflection" aria-label="反射 reflection">反射 reflection</a></li>
                <li>
                    <a href="#%e7%bc%96%e8%af%91%e5%99%a8api" aria-label="编译器API">编译器API</a><ul>
                        
                <li>
                    <a href="#javacompiler" aria-label="JavaCompiler">JavaCompiler</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bb%a3%e7%90%86proxy%e4%bb%a3%e6%9b%bf%e5%a4%84%e7%90%86" aria-label="代理(Proxy):代替处理">代理(Proxy):代替处理</a></li>
                <li>
                    <a href="#aopaspect-oriented-programming" aria-label="AOP(Aspect Oriented Programming)">AOP(Aspect Oriented Programming)</a><ul>
                        
                <li>
                    <a href="#%e9%9d%a2%e5%90%91%e5%88%87%e9%9d%a2%e7%bc%96%e7%a8%8b" aria-label="面向切面编程">面向切面编程</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%b3%a8%e8%a7%a3annotation" aria-label="注解Annotation">注解Annotation</a><ul>
                        
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e6%b3%a8%e8%a7%a3" aria-label="自定义注解">自定义注解</a></li>
                <li>
                    <a href="#%e5%85%83%e6%b3%a8%e8%a7%a3" aria-label="元注解">元注解</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%b5%8c%e5%a5%97%e7%b1%bb-nested-classes" aria-label="嵌套类 Nested classes">嵌套类 Nested classes</a></li>
                <li>
                    <a href="#lambda%e8%a1%a8%e8%be%be%e5%bc%8f" aria-label="Lambda表达式">Lambda表达式</a><ul>
                        
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e5%bc%8f%e6%8e%a5%e5%8f%a3" aria-label="函数式接口">函数式接口</a></li>
                <li>
                    <a href="#%e7%b3%bb%e7%bb%9f%e8%87%aa%e5%b8%a6%e7%9a%84%e5%87%bd%e6%95%b0%e5%bc%8f%e6%8e%a5%e5%8f%a3" aria-label="系统自带的函数式接口">系统自带的函数式接口</a></li>
                <li>
                    <a href="#%e6%96%b9%e6%b3%95%e5%bc%95%e7%94%a8" aria-label="方法引用">方法引用</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%b5%81-stream" aria-label="流 stream">流 stream</a><ul>
                        
                <li>
                    <a href="#%e6%b5%81%e7%9a%84%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b" aria-label="流的工作流程">流的工作流程</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="语法糖-syntactic-sugar">语法糖 Syntactic sugar<a hidden class="anchor" aria-hidden="true" href="#语法糖-syntactic-sugar">#</a></h2>
<h3 id="jdk版本">jdk版本<a hidden class="anchor" aria-hidden="true" href="#jdk版本">#</a></h3>
<ul>
<li>编译级别</li>
<li>兼容级别
<ul>
<li>编译后高版本可以运行低版本字节码</li>
<li>反之不行</li>
</ul>
</li>
</ul>
<h3 id="forfor-each">for/for-each<a hidden class="anchor" aria-hidden="true" href="#forfor-each">#</a></h3>
<ul>
<li>for
<ul>
<li><code>for(int i=0;i&lt;nums.leng;i++)</code></li>
<li>可以删除元素</li>
</ul>
</li>
<li>for-each
<ul>
<li><code>for(String i:hs)</code></li>
<li>5.0开始存在</li>
<li>语法简洁</li>
<li>不能删除元素</li>
<li>只能正向遍历</li>
<li>不能同时遍历两个集合</li>
</ul>
</li>
</ul>
<h3 id="enum类型">enum类型<a hidden class="anchor" aria-hidden="true" href="#enum类型">#</a></h3>
<ul>
<li>java5 推出</li>
<li>enum有多少个值就有几个实例对象</li>
<li>可以添加属性/构造函数/方法</li>
<li>构造函数只能是package-private(default)或者private,内部调用
enum类型
<ul>
<li>所有enum类型都是Enum的子类,也继承了相应方法</li>
<li>ordinal()返回枚举所在的索引位置,从0开始</li>
<li>compareTo()比较两个枚举值的索引位置大小</li>
<li>toString()返回枚举值的字符串标识</li>
<li>valueOf()将字符串初始化为枚举对象</li>
<li>values() 返回所有的枚举值</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.suger</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-07-05 21:31
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">testEnum</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Fruit</span> <span class="n">a1</span> <span class="o">=</span> <span class="n">Fruit</span><span class="o">.</span><span class="na">APPLE</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Price is&#34;</span> <span class="o">+</span> <span class="n">a1</span><span class="o">.</span><span class="na">price</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;====================&#34;</span><span class="o">);</span>
        <span class="n">Day</span> <span class="n">d1</span> <span class="o">=</span> <span class="n">Day</span><span class="o">.</span><span class="na">MONDAY</span><span class="o">;</span>
        <span class="n">Day</span> <span class="n">d2</span> <span class="o">=</span> <span class="n">Enum</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">Day</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&#34;MONDAY&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d1</span> <span class="o">==</span> <span class="n">d2</span><span class="o">);</span>
        <span class="n">Day</span> <span class="n">d3</span> <span class="o">=</span> <span class="n">Enum</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">Day</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&#34;TUESDAY&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">d3</span><span class="o">));</span>

        <span class="c1">//遍历
</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">Day</span> <span class="n">item</span> <span class="o">:</span> <span class="n">Day</span><span class="o">.</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
            <span class="c1">//输出索引值
</span><span class="c1"></span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;,&#34;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="na">ordinal</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">enum</span> <span class="n">Day</span> <span class="o">{</span>
        <span class="n">MONDAY</span><span class="o">,</span> <span class="n">TUESDAY</span><span class="o">,</span> <span class="n">WEDNESDAY</span><span class="o">,</span> <span class="n">THURSDAY</span><span class="o">,</span> <span class="n">FRIDAY</span><span class="o">,</span> <span class="n">SATURDAY</span><span class="o">,</span> <span class="n">SUNDAY</span>
    <span class="o">}</span>

    <span class="kd">enum</span> <span class="n">Fruit</span> <span class="o">{</span>
        <span class="n">APPLE</span><span class="o">(</span><span class="n">10</span><span class="o">),</span> <span class="n">ORANGE</span><span class="o">(</span><span class="n">8</span><span class="o">);</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">price</span><span class="o">;</span>

        <span class="n">Fruit</span><span class="o">(</span><span class="kt">int</span> <span class="n">price</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">price</span> <span class="o">=</span> <span class="n">price</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPrice</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">price</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>


<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="不定项参数">不定项参数<a hidden class="anchor" aria-hidden="true" href="#不定项参数">#</a></h3>
<ul>
<li>JDK5提供了不定参数(可变参数)功能
<ul>
<li>类型后面加3个点,入int&hellip;/double&hellip;/String&hellip;</li>
<li>可变参数,本质上是一个数组</li>
<li>一个方法只能由一个不定项参数,且位于参数列表的最后</li>
<li>重载的优先级规则1:固定参数的方法,比可变参数优先级更高</li>
<li>重载的优先级规则2:调用语句,同时与两个带可变参数的方法匹配,则报错</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.suger</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description: 可变参数
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-07-05 21:46
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">testVariableArgument</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">print</span><span class="o">();</span>
        <span class="n">print</span><span class="o">(</span><span class="s">&#34;aaa&#34;</span><span class="o">);</span>
        <span class="n">print</span><span class="o">(</span><span class="s">&#34;aaa&#34;</span><span class="o">,</span><span class="s">&#34;bbb&#34;</span><span class="o">);</span>
        <span class="n">print</span><span class="o">(</span><span class="s">&#34;aaa&#34;</span><span class="o">,</span><span class="s">&#34;bbb&#34;</span><span class="o">,</span><span class="s">&#34;ccc&#34;</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">arg</span> <span class="o">:</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">arg</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">//当只有一个参数时,本方法优先级更高
</span><span class="c1"></span>    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;优先级高的方法&#34;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">//错误:一个方法不可以有多个可变参数
</span><span class="c1">//    public static void print(String... args, int... irgs) {
</span><span class="c1">//
</span><span class="c1">//    }
</span><span class="c1"></span>    <span class="c1">//调用语句,同时与两个带可变参数的方法匹配,则报错
</span><span class="c1">//    private static void print(String s1, String... args) {
</span><span class="c1">//
</span><span class="c1">//    }
</span><span class="c1"></span><span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="静态导入">静态导入<a hidden class="anchor" aria-hidden="true" href="#静态导入">#</a></h3>
<ul>
<li>import static</li>
<li>导入类中的静态方法
<ul>
<li>使用时可以直接写方法名,不写类名</li>
</ul>
</li>
<li>少用*</li>
<li>如果重名需要补充类名</li>
</ul>
<h3 id="自动装箱和拆箱">自动装箱和拆箱<a hidden class="anchor" aria-hidden="true" href="#自动装箱和拆箱">#</a></h3>
<ul>
<li>JDK5开始引入,简化基本类型和对象转化的写法</li>
<li>Integer&ndash;int&hellip;</li>
<li>编译器的工作,不是jvm的工作</li>
<li><code>==</code>:基本类型是内容相同,对象是指针是否相同</li>
<li>基本类型没有空值,对象有null</li>
<li>基础数据类型与封装类型进行 <code>==</code>,<code>+</code>,<code>-</code>,<code>*</code>,<code>/</code>操作运算,会将封装类进行拆箱,对基础数据类型进行运算</li>
<li>谨慎使用多个非同类的数值类进行运算</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.suger</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-07-07 15:31
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">testNumber</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Integer</span> <span class="n">a1</span> <span class="o">=</span> <span class="n">1000</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">a2</span> <span class="o">=</span> <span class="n">1000</span><span class="o">;</span>
        <span class="n">Integer</span> <span class="n">a3</span> <span class="o">=</span> <span class="n">2000</span><span class="o">;</span>
        <span class="n">Long</span> <span class="n">a4</span> <span class="o">=</span> <span class="n">2000L</span><span class="o">;</span>
        <span class="kt">long</span> <span class="n">a5</span> <span class="o">=</span> <span class="n">2000L</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a1</span> <span class="o">==</span> <span class="n">a2</span><span class="o">);</span><span class="c1">//拆箱再进行数值比较
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a3</span> <span class="o">==</span> <span class="o">(</span><span class="n">a1</span> <span class="o">+</span> <span class="n">a2</span><span class="o">));</span><span class="c1">//拆箱再进行数值比较
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a4</span> <span class="o">==</span> <span class="o">(</span><span class="n">a1</span> <span class="o">+</span> <span class="n">a2</span><span class="o">));</span><span class="c1">//拆箱再进行数值比较
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a5</span> <span class="o">==</span> <span class="o">(</span><span class="n">a1</span> <span class="o">+</span> <span class="n">a2</span><span class="o">));</span><span class="c1">//拆箱再进行数值比较
</span><span class="c1"></span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a3</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">a1</span> <span class="o">+</span> <span class="n">a2</span><span class="o">));</span><span class="c1">//equals要求同类且内容相同
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a4</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">a1</span> <span class="o">+</span> <span class="n">a2</span><span class="o">));</span><span class="c1">//equals要求同类且内容相同
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a4</span><span class="o">.</span><span class="na">equals</span><span class="o">((</span><span class="kt">long</span><span class="o">)(</span><span class="n">a1</span> <span class="o">+</span> <span class="n">a2</span><span class="o">)));</span><span class="c1">//equals要求同类,且值相同
</span><span class="c1">//        System.out.println(a3 == a4);//不同类型不能比较
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="多异常并列">多异常并列<a hidden class="anchor" aria-hidden="true" href="#多异常并列">#</a></h3>
<ul>
<li>多个异常用 <code>|</code> 隔开</li>
<li>多个异常之间不能有直接/简介继承关系</li>
</ul>
<h3 id="数字增强">数字增强<a hidden class="anchor" aria-hidden="true" href="#数字增强">#</a></h3>
<ul>
<li>数字可以二进制赋值
<ul>
<li>避免二进制计算</li>
<li>byte/short/int/long</li>
</ul>
</li>
<li>数值字面量中可以使用下划线
<ul>
<li>增加数字的可读性和纠错功能</li>
<li>short/int/long/float/double</li>
<li>下划线只能出现在数字中间</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.suger</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-07-07 15:40
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">testNumber2</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">test1</span><span class="o">();</span>
        <span class="n">test2</span><span class="o">();</span>

    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">test2</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">a1</span> <span class="o">=</span> <span class="n">9999999999L</span><span class="o">;</span>
        <span class="kt">long</span> <span class="n">a2</span> <span class="o">=</span> <span class="n">9_999_999_999L</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">a3</span> <span class="o">=</span> <span class="n">0b0111_1011_0001</span><span class="o">;</span><span class="c1">//二进制0b开头
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">a4</span> <span class="o">=</span> <span class="n">02_014</span><span class="o">;</span><span class="c1">//8进制,0开头
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">a5</span> <span class="o">=</span> <span class="n">123__45</span><span class="o">;</span><span class="c1">//可以多个下划线
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">a6</span> <span class="o">=</span> <span class="n">0x7_B_1</span><span class="o">;</span><span class="c1">//十六进制
</span><span class="c1"></span>        <span class="kt">float</span> <span class="n">a7</span> <span class="o">=</span> <span class="n">3</span><span class="o">.</span><span class="na">56_78f</span><span class="o">;</span><span class="c1">//float
</span><span class="c1"></span>        <span class="kt">double</span> <span class="n">a8</span> <span class="o">=</span> <span class="n">1</span><span class="o">.</span><span class="na">3_45_67</span><span class="o">;</span><span class="c1">//double
</span><span class="c1"></span>
<span class="c1">//        int b1 = 0b_123_4; _必须在数字之间
</span><span class="c1">//        int b2 = 0123_4_;不能在末尾
</span><span class="c1">//        int b3 = _123;不能在开头
</span><span class="c1">//        int b4 = 0_ x_123;不能拆开0x
</span><span class="c1">//        int b5 = 0x_51;_必须在数字之间
</span><span class="c1">//        long b6 = 1000_L;_必须在数字之间
</span><span class="c1">//        float b7 = 1.34f _;_不能在末尾
</span><span class="c1"></span>        
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">test1</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">byte</span> <span class="n">a1</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="n">0b00100001</span><span class="o">;</span>
        <span class="kt">short</span> <span class="n">a2</span> <span class="o">=</span> <span class="o">(</span><span class="kt">short</span><span class="o">)</span> <span class="n">0b001010100</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">a3</span> <span class="o">=</span> <span class="n">0b0010101010</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">a4</span> <span class="o">=</span> <span class="n">0b101</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">a5</span> <span class="o">=</span> <span class="n">0B101</span><span class="o">;</span><span class="c1">//B可以大小写
</span><span class="c1"></span>        <span class="kt">long</span> <span class="n">a6</span> <span class="o">=</span> <span class="n">0b1010101010010010010101010L</span><span class="o">;</span>
        <span class="kd">final</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">s1</span> <span class="o">=</span> <span class="o">{</span><span class="n">0b101010</span><span class="o">,</span> <span class="n">0b101101</span><span class="o">,</span> <span class="n">0b1101111</span><span class="o">,</span> <span class="n">0b1111</span><span class="o">};</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a5</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">toBinaryString</span><span class="o">(</span><span class="n">a5</span><span class="o">));</span>
    <span class="o">}</span>
    
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="接口方法">接口方法<a hidden class="anchor" aria-hidden="true" href="#接口方法">#</a></h3>
<ul>
<li>
<p>java8 接口默认方法/静态方法(都带具体实现)</p>
</li>
<li>
<p>默认方法</p>
<ul>
<li>规则
<ul>
<li>以default关键字标注,其他定义和普通函数一样</li>
<li>规则1:默认方法 不能重写 Object中的方法</li>
<li>规则2:实现类可以继承/重写父接口默认方法</li>
<li>规则3:接口可以继承/重写父接口的默认方法</li>
<li>规则4:当父类和父接口都有(同名同参数) 默认方法,子类继承父类的默认方法,这样可以兼容JDK7及以前的代码</li>
<li>规则5:子类实现了两个接口(均有同名同参数的默认方法),那么编译失败,必须在子类中重写这个default方法</li>
</ul>
</li>
</ul>
</li>
<li>
<p>静态方法</p>
<ul>
<li>属于本接口,不属于子类/子接口</li>
<li>子类(子接口)没有继承该静态方法,只能通过所在的接口名来调用
-java9 私有方法</li>
<li>解决多个默认方法/静态方法的内容重复问题</li>
<li>私有方法属于本接口,只在本接口内使用,不属于子类/子接口</li>
<li>子类(子接口)没有继承该私有方法,也无法调用</li>
<li>静态私有方法可以被静态/默认方法调用,非静态私有方法被默认方法调用</li>
</ul>
</li>
<li>
<p>接口,抽象类</p>
<ul>
<li>相同点
<ul>
<li>都是抽象的,都不能被实例化,即不能被new</li>
<li>都可以有实现方法</li>
<li>都可以不需要继承者实现所有方法</li>
</ul>
</li>
<li>不同点(java12之前)
<ul>
<li>抽象类最多只能继承一个,接口可以实现多个</li>
<li>接口的变量默认是public static final,且必须有初值,子类不能修改,而抽象类的变量默认是default,子类可以继承修改</li>
<li>接口没有构造函数,抽象类有构造函数</li>
<li>接口没有main函数,抽象类可以有main函数</li>
<li>接口有public/default/private的方法,抽象类只有public/private/protected/不写关键字的(default)的方法</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="try-with-resource">try-with-resource<a hidden class="anchor" aria-hidden="true" href="#try-with-resource">#</a></h3>
<ul>
<li>jdk7提供try-with-resource
<ul>
<li>资源要求定义在try中,若已经定义在外面,则需要一个本地变量</li>
</ul>
</li>
<li>jdk9不在要求定义临时变量,可以直接使用外部资源变量</li>
<li>原理
<ul>
<li>资源对象必须实现AutoCloseable接口,即close方法,jdk自带</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.suger.testTryWithResource</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-07-07 16:58
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">test</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">(</span><span class="n">MyConnection</span> <span class="n">connection</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyConnection</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">connection</span><span class="o">.</span><span class="na">sendData</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="kd">class</span> <span class="nc">MyConnection</span> <span class="kd">implements</span> <span class="n">AutoCloseable</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendData</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Send Data...&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Close...&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="resourcebundle文件加载">ResourceBundle文件加载<a hidden class="anchor" aria-hidden="true" href="#resourcebundle文件加载">#</a></h3>
<ul>
<li>JDK9及以后,ResourceBundle默认以UTF-8方式加载</li>
</ul>
<h3 id="var类型">var类型<a hidden class="anchor" aria-hidden="true" href="#var类型">#</a></h3>
<ul>
<li>java10推出var
<ul>
<li>避免信息冗余</li>
<li>对齐了变量名</li>
<li>更容易阅读</li>
<li>本质上还是强类型语言,编译器负责推断类型,并写入字节码文件,因此推断后不能更改</li>
</ul>
</li>
<li>var的限制
<ul>
<li>可以用在局部变量中,非类成员变量</li>
<li>可以在for/for-each中</li>
<li>声明时必须初始化</li>
<li>不能用在方法(形式)参数和返回类型</li>
<li>大面积滥用会使代码整体阅读性变差</li>
<li>var 只在编译时起作用,没有在字节码中引入新的内容,也没有专门的jvm指令处理var</li>
</ul>
</li>
</ul>
<h3 id="switch">switch<a hidden class="anchor" aria-hidden="true" href="#switch">#</a></h3>
<ul>
<li>支持的类型:byte/Byte,short/Short,int/Integer,char/Character,String(7.0),Enum(5.0)</li>
<li>仍不支持long/float/double</li>
<li>多分支合并</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.suger</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-07-07 17:16
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">testSwitch</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">//        test1();
</span><span class="c1"></span>        <span class="n">test2</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">test2</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">num</span><span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">days</span> <span class="o">=</span> <span class="k">switch</span> <span class="o">(</span><span class="n">num</span><span class="o">){</span>
            <span class="k">case</span> <span class="n">1</span><span class="o">,</span><span class="n">3</span><span class="o">,</span><span class="n">5</span><span class="o">,</span><span class="n">7</span><span class="o">,</span><span class="n">8</span><span class="o">,</span><span class="n">10</span><span class="o">,</span><span class="n">12</span> <span class="o">-&gt;</span> <span class="n">31</span><span class="o">;</span>
            <span class="k">case</span> <span class="n">4</span><span class="o">,</span><span class="n">6</span><span class="o">,</span><span class="n">9</span><span class="o">,</span><span class="n">11</span> <span class="o">-&gt;</span> <span class="n">30</span><span class="o">;</span>
            <span class="k">default</span> <span class="o">-&gt;</span> <span class="n">28</span><span class="o">;</span>
        <span class="o">};</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">days</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">test1</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">month</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">result</span><span class="o">=-</span><span class="n">1</span><span class="o">;</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">month</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">case</span> <span class="s">&#34;Jan&#34;</span><span class="o">,</span><span class="s">&#34;Mar&#34;</span><span class="o">,</span><span class="s">&#34;May&#34;</span><span class="o">,</span><span class="s">&#34;July&#34;</span><span class="o">,</span><span class="s">&#34;Aug&#34;</span><span class="o">,</span><span class="s">&#34;Oct&#34;</span><span class="o">,</span><span class="s">&#34;Dec&#34;</span> <span class="o">-&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">31</span><span class="o">;</span>
            <span class="k">case</span> <span class="s">&#34;Apr&#34;</span><span class="o">,</span><span class="s">&#34;June&#34;</span><span class="o">,</span><span class="s">&#34;Sep&#34;</span><span class="o">,</span><span class="s">&#34;Nov&#34;</span> <span class="o">-&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">30</span><span class="o">;</span>
            <span class="k">case</span> <span class="s">&#34;Feb&#34;</span> <span class="o">-&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">28</span><span class="o">;</span>
            <span class="k">default</span> <span class="o">-&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="o">-</span><span class="n">1</span><span class="o">;</span>


        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>


</code></pre></td></tr></table>
</div>
</div><h2 id="反射-reflection">反射 reflection<a hidden class="anchor" aria-hidden="true" href="#反射-reflection">#</a></h2>
<ul>
<li>定义
<ul>
<li>程序可以访问,检测和修改它本身状态或行为的能力,即自描述和自控制</li>
<li>可以在运行时加载,探知,和使用编译期间完全未知的类</li>
<li>给java插上动态语言特性的翅膀,弥补强类型语言的不足</li>
<li>java.lan.reflect包,在java2存在,java5完善</li>
</ul>
</li>
<li>功能
<ul>
<li>在运行中分析类的能力</li>
<li>在运行中查看和操作对象
<ul>
<li>基于反射自由创建对象</li>
<li>反射构建出无法直接访问的类</li>
<li>set或者get到无法访问的成员变量</li>
<li>调用不可访问的方法</li>
</ul>
</li>
<li>实现通用的数组操作代码</li>
<li>类似函数指针的功能</li>
</ul>
</li>
<li>创建对象
<ol>
<li>静态编码&amp;编译(new)</li>
<li>克隆(clone()),继承Cloneable,速度快</li>
<li>序列化serialization,反序列化deserialization继承Serializable接口</li>
</ol>
<ul>
<li>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">      <span class="kn">package</span> <span class="nn">notes.Java.Java_Final.Reflect</span><span class="o">;</span>

      <span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

      <span class="cm">/**
</span><span class="cm">       * @Description:
</span><span class="cm">       * @author: Anhlaidh
</span><span class="cm">       * @date: 2020-07-07 18:05
</span><span class="cm">       */</span>
      <span class="kd">public</span> <span class="kd">class</span> <span class="nc">testSerialization</span> <span class="o">{</span>
          <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ClassNotFoundException</span> <span class="o">{</span>
              <span class="n">A</span> <span class="n">obj1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">A</span><span class="o">();</span>
              <span class="n">ObjectOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;data.obj&#34;</span><span class="o">));</span>
              <span class="n">out</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">obj1</span><span class="o">);</span>
              <span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
              <span class="n">ObjectInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectInputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;data.obj&#34;</span><span class="o">));</span>
              <span class="n">A</span> <span class="n">obj2</span> <span class="o">=</span> <span class="o">(</span><span class="n">A</span><span class="o">)</span> <span class="n">in</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
              <span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
              <span class="n">obj2</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>
          <span class="o">}</span>

      <span class="o">}</span>

      <span class="kd">class</span> <span class="nc">A</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>
          <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="n">1L</span><span class="o">;</span>

          <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>
              <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;hello from A&#34;</span><span class="o">);</span>

          <span class="o">}</span>

      <span class="o">}</span>
      <span class="err">```</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<ol start="4">
<li>反射
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.Reflect</span><span class="o">;</span>


<span class="kn">import</span> <span class="nn">java.lang.reflect.Constructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.InvocationTargetException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-07-07 19:32
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">testNewInstance</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClassNotFoundException</span><span class="o">,</span> <span class="n">InvocationTargetException</span><span class="o">,</span> <span class="n">IllegalAccessException</span><span class="o">,</span> <span class="n">InstantiationException</span><span class="o">,</span> <span class="n">NoSuchMethodException</span> <span class="o">{</span>
        <span class="n">Object</span> <span class="n">obj1</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&#34;notes.Java.Java_Final.Reflect.A&#34;</span><span class="o">).</span><span class="na">newInstance</span><span class="o">();</span>
        <span class="n">Method</span> <span class="n">m</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&#34;notes.Java.Java_Final.Reflect.A&#34;</span><span class="o">).</span><span class="na">getMethod</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">);</span>
        <span class="n">m</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">obj1</span><span class="o">);</span><span class="c1">//获取方法
</span><span class="c1"></span>        <span class="n">A</span> <span class="n">obj2</span> <span class="o">=</span> <span class="o">(</span><span class="n">A</span><span class="o">)</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&#34;notes.Java.Java_Final.Reflect.A&#34;</span><span class="o">).</span><span class="na">newInstance</span><span class="o">();</span>
        <span class="n">Constructor</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">constructor</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">();</span><span class="c1">//构造函数
</span><span class="c1"></span>        <span class="n">A</span> <span class="n">obj3</span> <span class="o">=</span> <span class="n">constructor</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
        <span class="n">obj3</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>

    <span class="o">}</span>

<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
<li>内容
<ol>
<li>Class:类型标识</li>
</ol>
<ul>
<li>JVM为每个对象都保留其类型标识信息(Runtime Type Identification)</li>
<li>成员变量,方法,构造函数,修饰符,包,父类,父接口&hellip;</li>
<li>成员变量Field</li>
<li>方法Method</li>
<li>构造函数Constructor</li>
</ul>
</li>
</ul>
<h2 id="编译器api">编译器API<a hidden class="anchor" aria-hidden="true" href="#编译器api">#</a></h2>
<ul>
<li>对 .java文件即时编译</li>
<li>对字符串即时编译</li>
<li>监听在编译过程中产生的警告和错误</li>
<li>在代码中运行编译器(并非:Runtime命令调用javac命令)</li>
</ul>
<h3 id="javacompiler">JavaCompiler<a hidden class="anchor" aria-hidden="true" href="#javacompiler">#</a></h3>
<ul>
<li>
<p>1.6推出</p>
</li>
<li>
<p>可用在程序文件中的Java编译器接口(代替javac.exe)</p>
</li>
<li>
<p>在程序中编译java文件,产生class文件</p>
</li>
<li>
<p>run方法(继承自java.tools.Tools):较简单,可以编译java源文件,生成class文件,但不能指定输出
路径,监控错误信息,调用后就在源码所在目录生成class文件</p>
</li>
<li>
<p>getTask方法:更强大的功能,可以编译java源文件,包括在内存中的java文件(字符串),生成class文件</p>
</li>
<li>
<p>编译文件:</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.JavaCompiler</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.tools.JavaCompiler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.tools.ToolProvider</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.ByteArrayOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.Charset</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-08-04 14:30
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleJavaCompiler</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">//        successCompile();
</span><span class="c1"></span>
        <span class="n">failCompile</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">failCompile</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">ByteArrayOutputStream</span> <span class="n">err</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayOutputStream</span><span class="o">();</span>
        <span class="n">JavaCompiler</span> <span class="n">compiler</span> <span class="o">=</span> <span class="n">ToolProvider</span><span class="o">.</span><span class="na">getSystemJavaCompiler</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">compiler</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">err</span><span class="o">,</span> <span class="s">&#34;./aaa.java&#34;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">0</span> <span class="o">==</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Success&#34;</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Fail&#34;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">err</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">(),</span> <span class="n">Charset</span><span class="o">.</span><span class="na">defaultCharset</span><span class="o">())</span> <span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>


    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">successCompile</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">JavaCompiler</span> <span class="n">compiler</span> <span class="o">=</span> <span class="n">ToolProvider</span><span class="o">.</span><span class="na">getSystemJavaCompiler</span><span class="o">();</span>
        <span class="cm">/**
</span><span class="cm">         * 第一个参数:输入流,null表示默认使用system.in
</span><span class="cm">         * 第二个参数:输出流,null标识默认使用system.out
</span><span class="cm">         * 第三个参数:错误流,null标识默认使用system.err
</span><span class="cm">         * 第四个参数:String...需要编译的文件名
</span><span class="cm">         * 返回值:0表示成功,其他错误
</span><span class="cm">         */</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">compiler</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="s">&#34;G:\\Coding\\src\\main\\java\\notes.Java\\Java_Final\\API\\hello1.java&#34;</span><span class="o">,</span><span class="s">&#34;G:\\Coding\\src\\main\\java\\notes.Java\\Java_Final\\API\\hello2.java&#34;</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">0</span> <span class="o">==</span> <span class="n">result</span> <span class="o">?</span> <span class="s">&#34;Success&#34;</span> <span class="o">:</span> <span class="s">&#34;Fail&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>编译字符串</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.JavaCompiler</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.tools.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URISyntaxException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.Charset</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-08-04 14:46
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaCompilerTask</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">compilerJavaFromString</span><span class="o">();</span>
<span class="c1">//        System.out.println(&#34;hello world&#34;);
</span><span class="c1"></span>    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">compilerJavaFromString</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">StringBuffer</span> <span class="n">stringBuffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">className</span> <span class="o">=</span> <span class="s">&#34;Hello&#34;</span><span class="o">;</span>
        <span class="n">stringBuffer</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;public class &#34;</span> <span class="o">+</span> <span class="n">className</span> <span class="o">+</span> <span class="s">&#34;{&#34;</span><span class="o">);</span>
        <span class="n">stringBuffer</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34; public static void main(String[] args) {&#34;</span><span class="o">);</span>
        <span class="n">stringBuffer</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34; System.out.println(\&#34;hello world\&#34;);\n&#34;</span><span class="o">);</span>
        <span class="n">stringBuffer</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;}\n&#34;</span><span class="o">);</span>
        <span class="n">stringBuffer</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;}\n&#34;</span><span class="o">);</span>


        <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">compiler</span><span class="o">(</span><span class="n">className</span><span class="o">,</span> <span class="n">stringBuffer</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//生成对象
</span><span class="c1"></span>            <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
            <span class="n">Method</span> <span class="n">m</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">&#34;main&#34;</span><span class="o">,</span> <span class="n">String</span><span class="o">[].</span><span class="na">class</span><span class="o">);</span>
            <span class="n">m</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">obj</span><span class="o">,</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]{</span><span class="k">new</span> <span class="n">String</span><span class="o">[]{}});</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>

        <span class="o">}</span>

    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">compiler</span><span class="o">(</span><span class="n">String</span> <span class="n">className</span><span class="o">,</span> <span class="n">String</span> <span class="n">javaCode</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">JavaSourceFromString</span> <span class="n">srcObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JavaSourceFromString</span><span class="o">(</span><span class="n">className</span><span class="o">,</span> <span class="n">javaCode</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">srcObject</span><span class="o">.</span><span class="na">getCode</span><span class="o">());</span>
        <span class="n">Iterable</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">JavaFileObject</span><span class="o">&gt;</span> <span class="n">fileObjects</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">srcObject</span><span class="o">);</span>

        <span class="n">JavaCompiler</span> <span class="n">compiler</span> <span class="o">=</span> <span class="n">ToolProvider</span><span class="o">.</span><span class="na">getSystemJavaCompiler</span><span class="o">();</span>
        <span class="n">StandardJavaFileManager</span> <span class="n">fileManager</span> <span class="o">=</span> <span class="n">compiler</span><span class="o">.</span><span class="na">getStandardFileManager</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">Charset</span><span class="o">.</span><span class="na">defaultCharset</span><span class="o">());</span>
        <span class="n">DiagnosticCollector</span><span class="o">&lt;</span><span class="n">JavaFileObject</span><span class="o">&gt;</span> <span class="n">diagnosticCollector</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DiagnosticCollector</span><span class="o">&lt;&gt;();</span>
        <span class="c1">//设置编译的输出目录,并包装在options中
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">flag</span> <span class="o">=</span> <span class="s">&#34;-d&#34;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">outDir</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">URL</span> <span class="n">resource</span> <span class="o">=</span> <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getContextClassLoader</span><span class="o">().</span><span class="na">getResource</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">);</span>
            <span class="n">File</span> <span class="n">classpath</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">resource</span><span class="o">.</span><span class="na">toURI</span><span class="o">());</span>
            <span class="n">outDir</span> <span class="o">=</span> <span class="n">classpath</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">()</span> <span class="o">+</span> <span class="n">File</span><span class="o">.</span><span class="na">separator</span><span class="o">;</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">outDir</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">URISyntaxException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">options</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">flag</span><span class="o">,</span> <span class="n">outDir</span><span class="o">);</span>
        <span class="cm">/**
</span><span class="cm">         * JavaCompiler.getTask方法:以future的任务形式(多线程)来执行编译任务
</span><span class="cm">         * 第一个参数:额外输出流,null表示默认使用System.err
</span><span class="cm">         * 第二个参数:文件管理器,null表示编译器默认方法来报告诊断信息
</span><span class="cm">         * 第三个参数:诊断监听器,null表示使用编译器默认方法来报告诊断信息
</span><span class="cm">         * 第四个参数:编译器参数,null表示无参数
</span><span class="cm">         * 第五个参数:需要经过annotation处理的类名,null表示没有类需要annotation
</span><span class="cm">         * 第六个参数,待编译的类
</span><span class="cm">         */</span>
        <span class="n">JavaCompiler</span><span class="o">.</span><span class="na">CompilationTask</span> <span class="n">task</span> <span class="o">=</span> <span class="n">compiler</span><span class="o">.</span><span class="na">getTask</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="n">fileManager</span><span class="o">,</span> <span class="n">diagnosticCollector</span><span class="o">,</span> <span class="n">options</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">fileObjects</span><span class="o">);</span>
        <span class="c1">//等待编译结束
</span><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="na">call</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">result</span> <span class="o">==</span> <span class="kc">true</span><span class="o">)</span> <span class="o">{</span>

            <span class="k">try</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">className</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">Diagnostic</span> <span class="n">diagnostic</span> <span class="o">:</span> <span class="n">diagnosticCollector</span><span class="o">.</span><span class="na">getDiagnostics</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Error on line:&#34;</span> <span class="o">+</span> <span class="n">diagnostic</span><span class="o">.</span><span class="na">getLineNumber</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;;URI&#34;</span> <span class="o">+</span> <span class="n">diagnostic</span><span class="o">.</span><span class="na">getSource</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
            <span class="o">}</span>

        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>其中的JavaSourceFromString 类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.JavaCompiler</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.tools.SimpleJavaFileObject</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description: A file object used to represent source coming from a string
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-08-04 14:57
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaSourceFromString</span> <span class="kd">extends</span> <span class="n">SimpleJavaFileObject</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">code</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">JavaSourceFromString</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">code</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">URI</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">&#34;string:///&#34;</span> <span class="o">+</span> <span class="n">name</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="sc">&#39;.&#39;</span><span class="o">,</span> <span class="sc">&#39;/&#39;</span><span class="o">)</span> <span class="o">+</span> <span class="n">Kind</span><span class="o">.</span><span class="na">SOURCE</span><span class="o">.</span><span class="na">extension</span><span class="o">),</span><span class="n">Kind</span><span class="o">.</span><span class="na">SOURCE</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">code</span> <span class="o">=</span> <span class="n">code</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">CharSequence</span> <span class="nf">getCharContent</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">ignoreEncodingErrors</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">code</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getCode</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">code</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>notes.Java EE 的Jsp编译</li>
<li>在线编程观景</li>
<li>在线程序评判系统(OJ)</li>
<li>自动化的构建和测试工具</li>
</ul>
<h2 id="代理proxy代替处理">代理(Proxy):代替处理<a hidden class="anchor" aria-hidden="true" href="#代理proxy代替处理">#</a></h2>
<ul>
<li>代理模式
<ul>
<li>外界不用直接访问目标对象,而是访问代理对象,由代理对象再调用目标对象</li>
<li>代理对象中可以添加监控和审查处理</li>
<li>静态代理
<ul>
<li>代理对象持有目标对象的句柄</li>
<li>所有调用目标对象的方法,都调用代理对象的方法</li>
<li>对每个方法,需要静态编码(理解简单,但代码繁琐)</li>
</ul>
</li>
<li>动态代理
<ul>
<li>对目标对象的方法每次被调用,进行动态拦截</li>
<li>方法重名会用第一个接口的方法</li>
</ul>
</li>
</ul>
</li>
<li>Main</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.Proxy.test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-08-04 18:06
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MultipleInterfacesProxyTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">NoSuchMethodException</span><span class="o">,</span> <span class="n">IllegalAccessException</span><span class="o">,</span> <span class="n">InvocationTargetException</span><span class="o">,</span> <span class="n">InstantiationException</span> <span class="o">{</span>
        <span class="n">Cook</span> <span class="n">cook</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CookImpl</span><span class="o">();</span>
        <span class="n">ClassLoader</span> <span class="n">cl</span> <span class="o">=</span> <span class="n">MultipleInterfacesProxyTest</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">();</span>
        <span class="n">ProxyHandler</span> <span class="n">handler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProxyHandler</span><span class="o">(</span><span class="n">cook</span><span class="o">);</span>
        <span class="c1">//生成代理类型
</span><span class="c1"></span>        <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">proxyClass</span> <span class="o">=</span> <span class="n">Proxy</span><span class="o">.</span><span class="na">getProxyClass</span><span class="o">(</span><span class="n">cl</span><span class="o">,</span> <span class="k">new</span> <span class="n">Class</span><span class="o">&lt;?&gt;[]{</span><span class="n">Cook</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">Driver</span><span class="o">.</span><span class="na">class</span><span class="o">});</span>
        <span class="c1">//生成代理对象
</span><span class="c1"></span>        <span class="n">Object</span> <span class="n">proxy</span> <span class="o">=</span> <span class="n">proxyClass</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">(</span><span class="k">new</span> <span class="n">Class</span><span class="o">[]{</span><span class="n">InvocationHandler</span><span class="o">.</span><span class="na">class</span><span class="o">}).</span><span class="na">newInstance</span><span class="o">(</span><span class="k">new</span> <span class="n">Object</span><span class="o">[]{</span><span class="n">handler</span><span class="o">});</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Proxy</span><span class="o">.</span><span class="na">isProxyClass</span><span class="o">(</span><span class="n">proxyClass</span><span class="o">));</span>

        <span class="n">Proxy</span> <span class="n">p</span> <span class="o">=</span> <span class="o">(</span><span class="n">Proxy</span><span class="o">)</span> <span class="n">proxy</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Proxy</span><span class="o">.</span><span class="na">getInvocationHandler</span><span class="o">(</span><span class="n">proxy</span><span class="o">).</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;proxy类型&#34;</span> <span class="o">+</span> <span class="n">proxyClass</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="c1">//代理对象都继承于java.lang.reflect.Proxy,但是获取父类是Object而不是Proxy
</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">father</span> <span class="o">=</span> <span class="n">proxyClass</span><span class="o">.</span><span class="na">getSuperclass</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;proxy的父类类型:&#34;</span> <span class="o">+</span> <span class="n">father</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">Class</span><span class="o">[]</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getInterfaces</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Class</span> <span class="n">c</span> <span class="o">:</span> <span class="n">cs</span><span class="o">)</span> <span class="o">{</span>

            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;proxy的父接口类型&#34;</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;===============&#34;</span><span class="o">);</span>
        <span class="n">Method</span><span class="o">[]</span> <span class="n">ms</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getMethods</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Method</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ms</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;调用方法&#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;参数为&#34;</span> <span class="o">+</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">deepToString</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">getParameters</span><span class="o">()));</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;===============&#34;</span><span class="o">);</span>
        <span class="n">Cook</span> <span class="n">c</span> <span class="o">=</span> <span class="o">(</span><span class="n">Cook</span><span class="o">)</span> <span class="n">proxy</span><span class="o">;</span>
        <span class="n">c</span><span class="o">.</span><span class="na">doWork</span><span class="o">();</span>
        <span class="n">Driver</span> <span class="n">d</span> <span class="o">=</span> <span class="o">(</span><span class="n">Driver</span><span class="o">)</span> <span class="n">proxy</span><span class="o">;</span>
        <span class="n">d</span><span class="o">.</span><span class="na">doWork</span><span class="o">();</span>

    <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>Handler</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.Proxy.test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.InvocationHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-08-04 18:03
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProxyHandler</span> <span class="kd">implements</span> <span class="n">InvocationHandler</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Cook</span> <span class="n">cook</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ProxyHandler</span><span class="o">(</span><span class="n">Cook</span> <span class="n">cook</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">cook</span> <span class="o">=</span> <span class="n">cook</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">invoke</span><span class="o">(</span><span class="n">Object</span> <span class="n">proxy</span><span class="o">,</span> <span class="n">Method</span> <span class="n">method</span><span class="o">,</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;proxy类型&#34;</span> <span class="o">+</span> <span class="n">proxy</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;调用方法&#34;</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="s">&#34;;参数为&#34;</span> <span class="o">+</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">deepToString</span><span class="o">(</span><span class="n">args</span><span class="o">));</span>
        <span class="n">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">cook</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="aopaspect-oriented-programming">AOP(Aspect Oriented Programming)<a hidden class="anchor" aria-hidden="true" href="#aopaspect-oriented-programming">#</a></h2>
<ul>
<li>面向对象:
将需求功能划分为不同的,独立,分装良好的类,并让他们通过继承和多态实现相同和不同行为</li>
<li>面向切面:
将通用需求功能从众多类中分离出来,使得很多类共享一个行为,一旦发生变化,不必修改很多类,而只修改这个行为即可</li>
</ul>
<h3 id="面向切面编程">面向切面编程<a hidden class="anchor" aria-hidden="true" href="#面向切面编程">#</a></h3>
<ul>
<li>一个概念/规范,没有限定语言</li>
<li>不是取代OOP编程,而是OOP的补充,和数据库的触发器有点相似</li>
<li>主要内容
<ul>
<li>Aspect:配置文件,包括一些Pointcut和响应的Advice</li>
<li>JointPoint:在程序中明确定义的点,如方法调用,对类成员访问等</li>
<li>PointCut: 一组JointPoint,可以哦通过逻辑关系/通配符/正则等组合起来,定义了响应advice将要发生的地方</li>
<li>Advice:定义了在pointcut处要发生的动作,通过before/after/around来关联</li>
<li>weaving:advice代码在具体jointPoint的关联方式</li>
</ul>
</li>
</ul>
<h2 id="注解annotation">注解Annotation<a hidden class="anchor" aria-hidden="true" href="#注解annotation">#</a></h2>
<ul>
<li>JDK1.5引入</li>
<li>位于源码中(代码/注释/注解),使用其他工具进行处理的标签</li>
<li>注解用来修饰程序的元素,但不会对修饰的对象有直接的影响</li>
<li>只有通过某种配套的工具才会对注解信息进行访问和处理</li>
<li>主要用途
<ul>
<li>提供信息给编译器/IDE工具</li>
<li>可用于其他工具来产生额外的代码/配置文件等</li>
<li>有一些注解可在程序运行时访问,增加程序动态性</li>
</ul>
</li>
<li>@SuppressWarning
<ul>
<li>不同jdk 不同,javac -X可查看</li>
</ul>
</li>
</ul>
<h3 id="自定义注解">自定义注解<a hidden class="anchor" aria-hidden="true" href="#自定义注解">#</a></h3>
<ul>
<li>注解可以包括的类型
<ul>
<li>8种基本类型</li>
<li>String</li>
<li>Class</li>
<li>enum</li>
<li>注解类型</li>
<li>由前面类型组成的数组</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.Annotation</span><span class="o">;</span>

<span class="kd">public</span> <span class="nd">@interface</span> <span class="n">BugReport</span> <span class="o">{</span>
    <span class="kd">enum</span> <span class="n">Status</span> <span class="o">{</span><span class="n">UNCONFIRMED</span><span class="o">,</span><span class="n">CONFIRMED</span><span class="o">,</span><span class="n">FIXED</span><span class="o">,</span> <span class="n">NOTABUG</span><span class="o">};</span>

    <span class="kt">boolean</span> <span class="nf">showStopper</span><span class="o">()</span> <span class="k">default</span> <span class="kc">true</span><span class="o">;</span>

    <span class="n">String</span> <span class="nf">assignedTo</span><span class="o">()</span> <span class="k">default</span> <span class="s">&#34;[notes]&#34;</span><span class="o">;</span>

    <span class="n">Status</span> <span class="nf">status</span><span class="o">()</span> <span class="k">default</span> <span class="n">Status</span><span class="o">.</span><span class="na">UNCONFIRMED</span><span class="o">;</span>

    <span class="n">String</span><span class="o">[]</span> <span class="nf">reportedBy</span><span class="o">();</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>注解使用的位置(@Target)</li>
<li>@Retention(RetentionPolicy.RUNTIME) 编译时也存在</li>
<li>自定义注解及其使用</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.Annotation.Single</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh 
</span><span class="cm"> * @date: 2020-08-05 17:18
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClassNotFoundException</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">passed</span> <span class="o">=</span> <span class="n">0</span><span class="o">,</span> <span class="n">failed</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">className</span> <span class="o">=</span> <span class="s">&#34;notes.Java.Java_Final.Annotation.Single.Foo&#34;</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Method</span> <span class="n">m</span> <span class="o">:</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">className</span><span class="o">).</span><span class="na">getMethods</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">SingleTest</span><span class="o">.</span><span class="na">class</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
                <span class="n">SingleTest</span> <span class="n">st</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="na">getAnnotation</span><span class="o">(</span><span class="n">SingleTest</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="n">m</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="n">st</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
                    <span class="n">passed</span><span class="o">++;</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Throwable</span> <span class="n">throwable</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Test %s failed %s %n&#34;</span><span class="o">,</span> <span class="n">m</span><span class="o">,</span> <span class="n">throwable</span><span class="o">.</span><span class="na">getCause</span><span class="o">().</span><span class="na">getMessage</span><span class="o">());</span>
                    <span class="n">failed</span><span class="o">++;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Success: %d ,Failed: %d %n&#34;</span><span class="o">,</span> <span class="n">passed</span><span class="o">,</span> <span class="n">failed</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="元注解">元注解<a hidden class="anchor" aria-hidden="true" href="#元注解">#</a></h3>
<ul>
<li>
<p>修饰注解的注解</p>
</li>
<li>
<p>@Target 设置目标范围</p>
<ul>
<li>限定目标注解作用于什么位置@Target({ElementType.METHOD})</li>
<li>ElementType.ANNOTATION_TYPE(注:修饰注解)</li>
<li>ElementType.CONSTRUCTOR</li>
<li>ElementType.FIELD</li>
<li>ElementType.LOCAL_VARIABLE</li>
<li>ElementType.METHOD</li>
<li>ElementType.PACKAGE</li>
<li>ElementType.PARAMETER</li>
<li>ElementType.TYPE(注:任何类型,即上面的类型都可以修饰)</li>
</ul>
</li>
<li>
<p>@Retention 设置保持性</p>
<ul>
<li>修饰其他注解的存在范围</li>
<li>Retention.SOURCE 注解仅存在源码,不在class文件</li>
<li>Retention.CLASS(默认的注解保留策略) 注解存在于.class文件,不能被JVM加载</li>
<li>Retention.RUNTIME这种策略下,注解可以被JVM运行时访问到,通常情况下,可以结合反射来做一些事情</li>
</ul>
</li>
<li>
<p>@Inherited 注解继承</p>
<ul>
<li>让一个类和他的子类都包含某个注解</li>
<li>普通的注解没有继承功能</li>
</ul>
</li>
<li>
<p>@Repeatable 此注解可以重复修饰</p>
<ul>
<li>自jdk1.8引入</li>
<li>表示被修饰的注解可以重复应用标注</li>
<li>需要定义注解和容器注解</li>
</ul>
</li>
<li>
<p>@Document 文档</p>
<ul>
<li>指明这个注解可以被javadoc工具解析,形成帮助文档</li>
</ul>
</li>
<li>
<p>RUNTIME注解调用路线</p>
<ol>
<li>Java为注解产生一个代理类</li>
<li>这个代理类包括一个AnnotationInvocationHandler成员变量</li>
<li>AnnotationInvocationHandler有个Map的成员变量,用来存储所有的注解的属性赋值</li>
<li>在程序中,调用注解接口的方法,将会被代理类接管,然后根据方法名字,到Map里拿到对应的Value并返回</li>
</ol>
</li>
</ul>
<h2 id="嵌套类-nested-classes">嵌套类 Nested classes<a hidden class="anchor" aria-hidden="true" href="#嵌套类-nested-classes">#</a></h2>
<ul>
<li>静态嵌套类: Static nested classes,即前面有static修饰符
<ul>
<li>层级和包围类(enclosing class)的成员变量/方法一样</li>
<li>静态嵌套类可以定义静态和非静态成员</li>
<li>第三方需要通过外部包围类才可以访问到静态嵌套类
<ul>
<li><code>Outer.Inner obj = new Outer.Inner();</code></li>
</ul>
</li>
</ul>
</li>
<li>非静态嵌套类: Non-static nested classes ,又名内部类,Inner classes
<ul>
<li>普通内部类(成员内部类)
<ul>
<li>非static的类,定义在某个类的成员变量位置</li>
<li>定义后在类里面均可以使用</li>
<li>在第三方类中,需要先创建外部包围类实例,才能创建内部类的实例,不允许单独的普通内部类对象存在
<ul>
<li><code>Outer.Inner obj = Outer.new Inner();</code></li>
</ul>
</li>
</ul>
</li>
<li>局部内部类(Local classes)
<ul>
<li>定义在代码块中的非静态的类,如方法,for循环,if语句等</li>
<li>定义后,即可创建对象使用</li>
<li>只能活在这个代码块中,代码块结束后,外界无法使用该类</li>
</ul>
</li>
<li>匿名内部类(Anonymous class)
<ul>
<li>没有类名的内部类,必须继承一个父类/实现一个父接口</li>
<li>在实例化以后,迅速转型为父类/父接口</li>
<li>这种类型的对象,只能new一个对象,之后以对象名字操作</li>
<li>可在普通语句和成员变量赋值时使用内部类</li>
</ul>
</li>
</ul>
</li>
<li>为什么需要嵌套类
<ul>
<li>不同的访问权限要求,更细粒度的访问控制</li>
<li>简介,避免过多的类定义</li>
<li>语言设计过于复杂,较难学习和使用</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>位置</th>
<th>名字(编译后的class文件)</th>
<th>作用范围</th>
<th>基本信息</th>
<th>嵌套类内部的内容</th>
<th>可访问的外部包围类的内容</th>
<th>和外部类的关系</th>
</tr>
</thead>
<tbody>
<tr>
<td>匿名内部类</td>
<td>成员变量或者成员方法内</td>
<td>外部类名+$+数字编号</td>
<td>跟随被复制变量的作用范围,<!-- raw HTML omitted -->外界无法访问</td>
<td>没有类名,没有构造函数<!-- raw HTML omitted -->没有static,private/default/protected/public修饰</td>
<td>不能带静态成员</td>
<td>访问外部的所有成员</td>
<td>在外部类对象内部</td>
</tr>
<tr>
<td>局部内部类</td>
<td>成员方法内</td>
<td>外部类名+$+序号+内部类名</td>
<td>所在的方法内<!-- raw HTML omitted -->外界无法访问</td>
<td>有类名,有构造函数<!-- raw HTML omitted -->没有static,private/default/protected/public修饰</td>
<td>不能带静态成员,除了常量</td>
<td>访问外部的所有成员</td>
<td>在外部类的对象内部</td>
</tr>
<tr>
<td>普通内部类</td>
<td>成员变量</td>
<td>外部类名+$+内部类名</td>
<td>包围类内可以访问,<!-- raw HTML omitted -->外界可以访问</td>
<td>有类名,有构造函数<!-- raw HTML omitted -->没有static,private/default/protected/public修饰</td>
<td>不能带静态成员,除了常量</td>
<td>访问外部的所有成员</td>
<td>外界可以new,<!-- raw HTML omitted -->但是必须依附于一个外部包围类对象</td>
</tr>
<tr>
<td>静态嵌套类</td>
<td>成员变量</td>
<td>外部类名+$+内部类名</td>
<td>包围类内部可以访问,<!-- raw HTML omitted -->外界可以访问</td>
<td>有类名,有构造函数<!-- raw HTML omitted -->有static,private/default/protected/public修饰</td>
<td>可以定义静态成员变量和方法</td>
<td>访问外部的所有静态成员</td>
<td>可以new,可独立进行工作</td>
</tr>
</tbody>
</table>
</li>
<li>变量遮蔽:Shadowing
<ul>
<li>嵌套类变量和外部包围类的变量重名
<ul>
<li>以离得近作为优先原则</li>
<li>优先级高的变量回遮蔽优先级低的变量</li>
<li>外部包围类.this.变量名,可以访问到外部包围类的成员变量</li>
<li>静态嵌套类不能访问非静态变量</li>
<li>Java7及以前,匿名内部类和局部内部类只能访问外部包围类的final成员变量</li>
<li>Java8及以后,匿名内部类和局部内部类可以访问外部包围类的final成员变量和
事实意义上的final变量(effectively final,一个变量定值后,再也没有改过值)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="lambda表达式">Lambda表达式<a hidden class="anchor" aria-hidden="true" href="#lambda表达式">#</a></h2>
<ul>
<li>参数,箭头,一个表达式</li>
<li>参数,箭头,{多个语句}</li>
<li>类似于匿名方法,一个没有名字的方法</li>
<li>参数,箭头,表达式语句</li>
<li>可以忽略写参数类型</li>
<li>坚决不声明返回值类型</li>
<li>没有public/protected/private/static/final等修饰符</li>
<li>单句表达式,将直接返回值,不用大括号</li>
<li>带return语句,算多句,必须用大括号</li>
</ul>
<h3 id="函数式接口">函数式接口<a hidden class="anchor" aria-hidden="true" href="#函数式接口">#</a></h3>
<ul>
<li>是一个接口,符合Java接口的定义</li>
<li>只包含一个抽象方法的接口</li>
<li>可以包含其他的default方法,static方法,private方法</li>
<li>由于只有一个未实现的方法,所以Lambda表达式可以自动填上这个尚未实现的方法</li>
<li>采用Lambda表达式,可以自动创建出一个(伪)嵌套类的对象(没有实际嵌套类class文件产生),然后使用,
比真正嵌套类更加轻量,更加简洁高效</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.Lambda</span><span class="o">;</span>
<span class="nd">@FunctionalInterface</span>
<span class="c1">//标记为函数式接口
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">StringChecker</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">);</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.Lambda</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-08-06 21:38
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="s">&#34;aaa&#34;</span><span class="o">,</span> <span class="s">&#34;bbbb&#34;</span><span class="o">,</span> <span class="s">&#34;cccccc&#34;</span><span class="o">};</span>
        <span class="n">StringChecker</span> <span class="n">eventLength</span> <span class="o">=</span> <span class="n">s1</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">%</span> <span class="n">2</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">};</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">p</span> <span class="o">:</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">eventLength</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">p</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>

            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="系统自带的函数式接口">系统自带的函数式接口<a hidden class="anchor" aria-hidden="true" href="#系统自带的函数式接口">#</a></h3>
<table>
<thead>
<tr>
<th>接口</th>
<th>参数</th>
<th>返回值</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>Predicate<!-- raw HTML omitted --></td>
<td>T</td>
<td>Boolean</td>
<td>接收一个参数,返回一个boolean</td>
</tr>
<tr>
<td>Consumer<!-- raw HTML omitted --></td>
<td>T</td>
<td>void</td>
<td>接受一个参数,无返回</td>
</tr>
<tr>
<td>Function&lt;T,R&gt;</td>
<td>T</td>
<td>R</td>
<td>接受一个参数,返回一个值</td>
</tr>
<tr>
<td>Supplier<!-- raw HTML omitted --></td>
<td>None</td>
<td>T</td>
<td>数据工厂</td>
</tr>
</tbody>
</table>
<h3 id="方法引用">方法引用<a hidden class="anchor" aria-hidden="true" href="#方法引用">#</a></h3>
<ul>
<li>Class::staticMethod</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.Lambda</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-08-06 22:26
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">method</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="n">3</span><span class="o">.</span><span class="na">5</span><span class="o">;</span>
        <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="n">worker</span><span class="o">(</span><span class="n">Math</span><span class="o">::</span><span class="n">abs</span><span class="o">,</span> <span class="n">a</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>
        <span class="kt">double</span> <span class="n">c</span> <span class="o">=</span> <span class="n">worker</span><span class="o">(</span><span class="n">Math</span><span class="o">::</span><span class="n">floor</span><span class="o">,</span> <span class="n">a</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
        <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="n">worker</span><span class="o">((</span><span class="n">num</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">num</span> <span class="o">%</span> <span class="n">10</span><span class="o">)),</span> <span class="n">a</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">worker</span><span class="o">(</span><span class="n">NumFunction</span> <span class="n">nf</span><span class="o">,</span> <span class="kt">double</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">nf</span><span class="o">.</span><span class="na">calculate</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>Class::instanceMethod
<ul>
<li>第一个参数将变成方法的执行体</li>
<li>String::compareToIgnoreCase等价于(x,y)-&gt;x.compareToIgnoreCase(y)</li>
<li>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">      String[] planets = new String[]{&#34;DDD&#34;,&#34;aaa&#34;, &#34;bbb&#34;, &#34;ccc&#34;};
      Arrays.sort(planets, String::compareToIgnoreCase);
      System.out.println(Arrays.toString(planets));
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>object::instanceMethod
<ul>
<li>支持this::instanceMethod</li>
<li>支持super::instanceMethod</li>
</ul>
</li>
<li>Class::new,调用某类构造函数,支持单个对象构建</li>
<li>Class[]::new,调用某类构造函数,支持数组对象构建</li>
<li>应用</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">notes.Java.Java_Final.Lambda</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * @Description:
</span><span class="cm"> * @author: Anhlaidh
</span><span class="cm"> * @date: 2020-08-07 15:06
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">testIterable</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="s">&#34;aaa&#34;</span><span class="o">,</span> <span class="s">&#34;bbb&#34;</span><span class="o">,</span> <span class="s">&#34;ccc&#34;</span><span class="o">};</span>
        <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">pList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">p</span><span class="o">));</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">pList</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">pList</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="流-stream">流 stream<a hidden class="anchor" aria-hidden="true" href="#流-stream">#</a></h2>
<ul>
<li>sequence of elements:一个流对外提供一个接口,可以访问到一串特定的数据,流不存储元素,但是可以根据需要进行计算转化</li>
<li>source:数据来源,如数据结构,数组,文件等</li>
<li>aggregate operation:聚合操作,流支持像SQL操作或者其他函数式语言的操作
如filter/map/reduce/find/match/sorted等</li>
<li>Stream流
<ul>
<li>pipelining:很多流操作也是返回一个流</li>
<li>Internal Iteration:流操作进行迭代,用户感知不到循环遍历</li>
</ul>
</li>
</ul>
<h3 id="流的工作流程">流的工作流程<a hidden class="anchor" aria-hidden="true" href="#流的工作流程">#</a></h3>
<ol>
<li>流的创建</li>
</ol>
<ul>
<li>Collection接口的stream方法</li>
<li>Arrays.stream(数组)</li>
<li>Stream.of()</li>
<li>
<table>
<thead>
<tr>
<th>empty() 空流</th>
</tr>
</thead>
</table>
</li>
</ul>
<ol start="2">
<li>流的转换,将流转换为其他流的中间操作,可包括多个步骤(惰性操作)</li>
<li>流的计算结果,这个操作会强制执行之前的惰性操作,这个步骤以后,流就再也不用了</li>
</ol>

</div>


  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://blog.oxide.ink/tags/java/">Java</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://blog.oxide.ink/posts/java/java%E7%AC%94%E8%AE%B002/">
    <span class="title">« 上一页</span>
    <br>
    <span>Java笔记02</span>
  </a>
</nav>


  </footer><section class="comments">

    <script src="https://utteranc.es/client.js"
            repo="Anhlaidh/Oxide"
            issue-term="pathname"
            theme="preferred-color-scheme"
            crossorigin="anonymous"
            async>
    </script>

</section>

</article>
    </main>
    <footer class="footer">
    <span>&copy; 2021 <a href="http://blog.oxide.ink/">Oxide</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
    <br>
    <span>Anhlaidh
        <a href="#">chinahantianzhao@foxmail.com</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a><script src="https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js"></script>
<script>
    let parm1 = ''
    if (document.cookie.indexOf("uv=false") == -1) {
        parm1 = "&uv=true"
        var t = new Date(new Date().getTime() + 1000 * 60 * 60 * 24);
        document.cookie = "uv=false; expires=" + t.toGMTString() + ";path=/";
    }
    fetch("https://analytics.radishkin.workers.dev/api?url=" + window.btoa(location.href) + parm1).then(res => {
        return res.json()
    }).then(res => {
        try {
            document.getElementById("busuanzi_value_page_pv").innerText = res.pv
        } catch(err) {}
        try{
            document.getElementById("busuanzi_container_site_uv").innerText = res.uv
        }catch(err){}
        try{
            document.getElementById("busuanzi_container_site_pv").innerText = res.total
        }catch(err){}
    })

</script>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;
        var isHide = true;

        const copybutton = document.createElement('button');
        const showbutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        showbutton.classList.add('show-code-button');
        copybutton.innerText = 'copy';
        showbutton.innerText = 'show';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }
        showbutton.addEventListener('click',()=>{
            if (isHide === true) {
                
                showbutton.parentElement.classList.add("code-showing")
                showbutton.innerText = 'hide';
                isHide = false;
            } else {
                
                showbutton.parentElement.classList.remove("code-showing")
                showbutton.innerText = 'show';
                isHide = true;
            }

        })

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(showbutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(showbutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            codeblock.parentNode.appendChild(showbutton);
        }
    });
</script>
</body>

</html>
